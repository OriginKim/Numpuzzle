# 🧩 멀티플레이 숫자 퍼즐 게임 (C# WinForms + TCP)

Windows Forms 기반의 **3×3 슬라이드 퍼즐(8-puzzle)** 입니다.  
TCP 서버와 통신해 **동시에 시작**하고, **가장 먼저 퍼즐을 완성한 플레이어가 승리**합니다.

👉 GitHub 프로필: https://github.com/OriginKim

-------------------------------------------------------------------------------
## ✨ 주요 기능

- 🎮 퍼즐 보드: 3×3 슬라이드 퍼즐, 빈칸과 상하좌우 인접 타일만 교환
- 🔄 섞기(Shuffle): 시작 시 무작위 배치 (현재 ‘항상 풀림’ 보장은 아님)
- ⏱ 상태 표시: 이동 횟수/경과 시간(Stopwatch) UI
- 🌐 멀티플레이: TCP 기반 3인 동시 시작/승패 판정/재경기 질의
- 📨 메시지: start, GameOver, win/lose, regame, regame:yes/no

-------------------------------------------------------------------------------
## 📁 프로젝트 구조
<pre>
Numpuzzle-main/
├─ GUI_Final_Project_GameClient/        # WinForms 클라이언트
│  ├─ GUI_Final_Project_GameClient.cs   # 퍼즐/타이머/통신 핵심 로직
│  ├─ Properties/Resources              # 타일 이미지(_1~_9, _null)
│  └─ 디자이너 산출물 등
├─ GUI_Final_Project_GameServer/        # TCP 서버 콘솔 앱
│  └─ Program.cs                        # 접속/준비/승패/재경기 제어
└─ Game Demonstration.mp4               # 시연 영상
</pre>
-------------------------------------------------------------------------------
## ▶️ 빠른 시작 (Quick Start)

# 0) 사전 요구사항
- Windows 10/11
- Visual Studio 2019/2022
- .NET Framework 4.7.2

# 1) 서버 실행
- GUI_Final_Project_GameServer를 시작 프로젝트로 선택 후 실행
- Program.cs → IP/Port를 환경에 맞게 수정 (기본: 192.168.0.208:5000)
- 콘솔이 "플레이어를 기다리는 중..." 상태로 3명 접속 대기

# 2) 클라이언트 실행 (3개 인스턴스)
- GUI_Final_Project_GameClient를 시작 프로젝트로 실행 (3번)
- ConnectToServer() 내 IP/Port를 서버와 동일하게 수정
- 각 클라이언트에서 시작(ready) → 서버가 ‘start’ 브로드캐스트 시 동시 시작

# 3) 플레이
- 타일 클릭 → 인접 빈칸과 스왑
- 0~7번 타일이 원본 순서와 같아지면 완성
- 승리자가 GameOver 전송 → 서버가 win/lose 전송 → regame 질의

-------------------------------------------------------------------------------
## 🔌 메시지 프로토콜 요약

송신자→수신자  | 메시지           | 의미
----------------|------------------|------------------------------
클라→서버       | start            | 준비 완료 (3명 모이면 시작)
서버→클라       | start            | 게임 시작 브로드캐스트
클라→서버       | GameOver         | 퍼즐 완성(승자 보고)
서버→클라       | win / lose       | 승/패 결과 통보
서버→클라       | regame           | 재경기 여부 질의
클라→서버       | regame:yes/no    | 재경기 수락/거절 (거절 시 서버 종료)

-------------------------------------------------------------------------------
## ⚙️ 주요 코드 포인트 (요약 설명)

- ConnectToServer(): TcpClient로 서버 연결, NetworkStream 확보, 별도 스레드로 수신 루프
- ListenForMessages(): 서버 메시지 수신 → start/win/lose/regame에 따라 UI/흐름 제어
- Shuffle(): 9칸 중 마지막 조각은 완료 시 채움 (Parity 검증 미적용)
- SwitchPictureBox(): 클릭 타일이 빈칸과 인접하면 이미지 스왑, 이동 수 증가, CheckWin() 호출
- CheckWin(): 0~7번 타일이 원본과 동일하면 true → GameOver 송신
- Stopwatch: 경과 시간 라벨 표시 (HH:mm:ss)

-------------------------------------------------------------------------------
## 🧪 트러블슈팅

- 연결 실패: IP/Port 불일치, 방화벽 차단, 서버 미실행 여부 확인
- 시작 안 됨: 3명 모두 start를 보내야 서버가 start 브로드캐스트
- 승리 판단 문제: 마지막 조각 채우는 타이밍과 CheckWin() 호출 순서 점검
- 재경기 불가: 누군가 regame:no를 보내면 서버 종료 로직 실행됨

-------------------------------------------------------------------------------
## 💡 개선 아이디어 (TODO)

- 항상 풀리는 섞기: 3×3 퍼즐 역전수(inversions) 짝수 조건 강제
- 인원 가변화: 접속 인원 수를 런타임 옵션/설정으로 변경 가능하게
- 안정성: 연결 끊김/재접속 처리, 예외 로깅, 타임아웃 처리
- 랭킹/기록: 승리 시간/이동 수 저장, 리더보드(파일/DB) 연동
- UX: 이동 애니메이션, 키보드 조작 지원, 사운드/효과, 접근성 향상

-------------------------------------------------------------------------------
## 📝 라이선스 & 사용 안내

- 학습/포트폴리오 용도 자유 사용
- 네트워크 설정(IP/Port)은 개인 환경에 맞게 변경 필수

-------------------------------------------------------------------------------
## 🙌 제작자 정보

- 개발: OriginKim (김기원)
- GitHub: https://github.com/OriginKim
- 데모: 리포지토리 내 Game Demonstration.mp4 참고
